"use strict";(self.webpackChunkangular_15_example=self.webpackChunkangular_15_example||[]).push([[367],{6367:(q,v,i)=>{i.r(v),i.d(v,{AdminManagerModule:()=>y});var l=i(433),s=i(6895),d=i(7859),e=i(8256),c=i(4786);function m(n,t){1&n&&(e.TgZ(0,"nav",1)(1,"div",2)(2,"a",3),e._uU(3,"management"),e.qZA()()())}let g=(()=>{class n{constructor(r){this.accountService=r,this.isAdminOrManager=!1}ngOnInit(){const r=this.accountService.accountValue;this.isAdminOrManager="Admin"===r?.role||"Staff"===r?.role}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(c.BR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","admin-nav navbar navbar-expand navbar-light px-3",4,"ngIf"],[1,"admin-nav","navbar","navbar-expand","navbar-light","px-3"],[1,"navbar-nav"],["routerLink","management","routerLinkActive","active",1,"nav-item","nav-link"]],template:function(r,o){1&r&&e.YNc(0,m,4,0,"nav",0),2&r&&e.Q6J("ngIf",o.isAdminOrManager)},dependencies:[s.O5,d.rH,d.Od],encapsulation:2}),n})(),f=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[d.lC],encapsulation:2}),n})();var u=i(590);function O(n,t){1&n&&(e.TgZ(0,"p"),e._uU(1,"You have no orders at the moment."),e.qZA())}function h(n,t){1&n&&(e.TgZ(0,"div",6)(1,"a",7),e._uU(2,"Create Order"),e.qZA()())}function _(n,t){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const r=t.$implicit;e.Q6J("value",r.id),e.xp6(1),e.AsE("",r.id," ",null==r.Product?null:r.Product.name," ")}}function Z(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"div",6)(1,"label",8)(2,"h5"),e._uU(3,"Track order Status:"),e.qZA()(),e.TgZ(4,"select",9),e.NdJ("change",function(a){e.CHM(r);const p=e.oxw();return e.KtG(p.onOrderSelect(a))}),e.TgZ(5,"option",10),e._uU(6,"--Select an Order--"),e.qZA(),e.YNc(7,_,2,3,"option",11),e.qZA()()}if(2&n){const r=e.oxw();e.xp6(7),e.Q6J("ngForOf",r.orders)}}function x(n,t){if(1&n&&(e.TgZ(0,"div",13)(1,"strong"),e._uU(2,"Order Status:"),e.qZA(),e._uU(3),e.qZA()),2&n){const r=e.oxw();e.xp6(3),e.hij(" ",r.selectedOrderStatus," ")}}function A(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(r);const a=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.cancelOrder(a.id))}),e._uU(1,"Cancel"),e.qZA()}}function T(n,t){1&n&&e._UZ(0,"div",25)}function b(n,t){if(1&n&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"strong"),e._uU(4,"Order ID:"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div",20)(7,"p")(8,"strong"),e._uU(9,"Product:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"p")(12,"strong"),e._uU(13,"Address:"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"p")(16,"strong"),e._uU(17,"Total Item:"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"p")(20,"strong"),e._uU(21,"Total Price:"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"p")(24,"strong"),e._uU(25,"Payment:"),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"p")(28,"strong"),e._uU(29,"Order Type:"),e.qZA(),e._uU(30),e.qZA(),e.TgZ(31,"p")(32,"strong"),e._uU(33,"Status:"),e.qZA(),e._uU(34),e.qZA(),e.TgZ(35,"p")(36,"strong"),e._uU(37,"Date:"),e.qZA(),e._uU(38),e.ALo(39,"date"),e.qZA()(),e.TgZ(40,"div",21),e.YNc(41,A,2,0,"button",22),e.YNc(42,T,1,0,"div",23),e.qZA()()()),2&n){const r=t.$implicit;e.xp6(5),e.hij(" ",r.id," "),e.xp6(5),e.hij(" ",null==r.Product?null:r.Product.name,""),e.xp6(4),e.hij(" ",r.shippingAddress,""),e.xp6(4),e.hij(" ",r.quantity,""),e.xp6(4),e.hij(" \u20b1",r.totalAmount,""),e.xp6(4),e.hij(" ",r.payment,""),e.xp6(4),e.hij(" ",r.salesChannel,""),e.xp6(4),e.hij(" ",r.orderStatus,""),e.xp6(4),e.hij(" ",e.xi3(39,11,r.createdAt,"short"),""),e.xp6(3),e.Q6J("ngIf",!r.isCancelling),e.xp6(1),e.Q6J("ngIf",r.isCancelling)}}function C(n,t){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15),e.YNc(2,b,43,14,"div",16),e.qZA()()),2&n){const r=e.oxw();e.xp6(2),e.Q6J("ngForOf",r.orders)}}const U=[{path:"",component:g,outlet:"subnav"},{path:"",component:f,children:[{path:"",component:(()=>{class n{constructor(r,o,a){this.orderService=r,this.accountService=o,this.alertService=a,this.isUser=!1}ngOnInit(){this.isUser="User"===this.accountService.accountValue?.role,this.isUser&&this.loadOrders()}loadOrders(){this.orderService.getAllOrders().pipe((0,u.P)()).subscribe(r=>this.orders=r)}onOrderSelect(r){const o=r.target.value;o?this.trackOrderStatus(o):this.selectedOrderStatus=void 0}trackOrderStatus(r){this.orderService.trackOrderStatus(r).pipe((0,u.P)()).subscribe({next:o=>{this.selectedOrderStatus=o},error:()=>{this.alertService.error("Failed to track order status.")}})}cancelOrder(r){const o=this.orders.find(a=>a.id===r);o.isCancelling=!0,this.orderService.cancelOrder(r).pipe((0,u.P)()).subscribe(()=>{this.orders=this.orders.filter(a=>a.id!==r),this.alertService.success("Order cancelled successfully")},a=>{o.isCancelling=!1,this.alertService.error("order is already ship or delivered")})}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(c.px),e.Y36(c.BR),e.Y36(c.c9))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:9,vars:5,consts:[[1,"p-4"],[1,"container"],[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","scroll-container","style","max-height: 500px; overflow-y: auto; padding: 10px; border: 1px solid #ddd; border-radius: 5px;",4,"ngIf"],[1,"mb-3"],["routerLink","/order/management/add",1,"btn","btn-success","btn-sm"],["for","orderSelect"],["id","orderSelect",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"alert","alert-info"],[1,"scroll-container",2,"max-height","500px","overflow-y","auto","padding","10px","border","1px solid #ddd","border-radius","5px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-3"],[1,"card-header","bg-info"],[1,"card-body"],[1,"card-footer","text-end"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"spinner-border","spinner-border-sm"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"My Orders"),e.qZA(),e.YNc(4,O,2,0,"p",2),e.YNc(5,h,3,0,"div",3),e.YNc(6,Z,8,1,"div",3),e.YNc(7,x,4,1,"div",4),e.YNc(8,C,3,1,"div",5),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("ngIf",!(null!=o.orders&&o.orders.length)),e.xp6(1),e.Q6J("ngIf",o.isUser),e.xp6(1),e.Q6J("ngIf",o.isUser),e.xp6(1),e.Q6J("ngIf",o.selectedOrderStatus),e.xp6(1),e.Q6J("ngIf",o.isUser))},dependencies:[s.sg,s.O5,l.YN,l.Kr,d.rH,s.uU],encapsulation:2}),n})()},{path:"management",loadChildren:()=>i.e(562).then(i.bind(i,1562)).then(n=>n.OrderModule)}]}];let S=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(U),d.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.ez,l.UX,S]}),n})()}}]);