"use strict";(self.webpackChunkangular_15_example=self.webpackChunkangular_15_example||[]).push([[401],{6401:(It,m,s)=>{s.r(m),s.d(m,{ProductsModule:()=>qt});var n=s(433),_=s(6895),u=s(7859),l=s(590),t=s(8256),p=s(4786);function g(i,r){1&i&&(t.TgZ(0,"div",28)(1,"a",29),t._uU(2,"+ Add Waybill Receipt"),t.qZA()())}function v(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const d=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.getAvailabilityInfo(d.id))}),t._uU(1," Check Availability "),t.qZA()}}function b(i,r){if(1&i&&(t.TgZ(0,"div",40)(1,"p")(2,"strong"),t._uU(3,"Available:"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Quantity:"),t.qZA(),t._uU(8),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(4),t.hij(" ",e.availabilityInfo.available?"Yes":"No",""),t.xp6(4),t.hij(" ",e.availabilityInfo.quantity,"")}}function h(i,r){1&i&&(t.TgZ(0,"div",8)(1,"a",41),t._uU(2,"Order"),t.qZA()())}function x(i,r){if(1&i&&(t.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"h5",34),t._uU(4),t.qZA(),t.TgZ(5,"p",35),t._uU(6),t.qZA(),t.TgZ(7,"p",35),t._uU(8),t.qZA(),t.YNc(9,v,2,0,"button",36),t.YNc(10,b,9,2,"div",37),t.YNc(11,h,3,0,"div",38),t.qZA()()()),2&i){const e=r.$implicit,o=t.oxw(2);t.xp6(4),t.hij("Product Name: ",e.name,""),t.xp6(2),t.hij("Price: \u20b1",e.price,""),t.xp6(2),t.hij("Status: ",e.productStatus,""),t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",o.availabilityInfo&&o.availabilityInfo.product===e.id),t.xp6(1),t.Q6J("ngIf",o.isUser)}}function Z(i,r){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,x,12,6,"div",30),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.products)}}function A(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const d=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.getAvailabilityInfo(d.id))}),t._uU(1," Check Availability "),t.qZA()}}function q(i,r){if(1&i&&(t.TgZ(0,"div",40)(1,"p")(2,"strong"),t._uU(3,"Available:"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Quantity:"),t.qZA(),t._uU(8),t.qZA()()),2&i){const e=t.oxw(4);t.xp6(4),t.hij(" ",e.availabilityInfo.available?"Yes":"No",""),t.xp6(4),t.hij(" ",e.availabilityInfo.quantity,"")}}function T(i,r){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,A,2,0,"button",49),t.YNc(2,q,9,2,"div",37),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",o.availabilityInfo&&o.availabilityInfo.product===e.id)}}function P(i,r){if(1&i&&(t.TgZ(0,"a",54),t._uU(1,"Edit"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.MGl("routerLink","edit/",e.id,"")}}function I(i,r){1&i&&t._UZ(0,"span",57)}const C=function(i,r){return{"btn-success":i,"btn-danger":r}};function U(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const d=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.toggleDeactivateReactivateProduct(d.id))}),t.YNc(1,I,1,0,"span",56),t._uU(2),t.qZA()}if(2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.Q6J("ngClass",t.WLB(4,C,"deactivated"===e.productStatus,"deactivated"!==e.productStatus))("disabled",o.deactivatingProductId===e.id||o.reactivatingProductId===e.id),t.xp6(1),t.Q6J("ngIf",o.deactivatingProductId===e.id||o.reactivatingProductId===e.id),t.xp6(1),t.hij(" ","deactivated"===e.productStatus?"Reactivate":"Deactivate"," ")}}function y(i,r){if(1&i&&(t.TgZ(0,"td",51),t.YNc(1,P,2,1,"a",52),t.YNc(2,U,3,7,"button",53),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",e.id)}}function N(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td",47),t._uU(2),t.qZA(),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",47),t._uU(6),t.qZA(),t.YNc(7,T,3,2,"td",46),t.YNc(8,y,3,2,"td",48),t.qZA()),2&i){const e=r.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij("\u20b1",e.price,""),t.xp6(2),t.Oqu(e.productStatus),t.xp6(1),t.Q6J("ngIf",o.isUser),t.xp6(1),t.Q6J("ngIf",o.isAdminManager)}}function J(i,r){1&i&&(t.TgZ(0,"tr")(1,"td",58),t._UZ(2,"span",59),t.qZA()())}function w(i,r){if(1&i&&(t.TgZ(0,"table",42)(1,"thead")(2,"tr")(3,"th",43),t._uU(4,"Item name"),t.qZA(),t.TgZ(5,"th",44),t._uU(6,"Amount"),t.qZA(),t.TgZ(7,"th",44),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th",43),t._uU(10,"View"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,N,9,5,"tr",45),t.YNc(13,J,3,0,"tr",46),t.qZA()()),2&i){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.filteredProducts),t.xp6(1),t.Q6J("ngIf",!e.filteredProducts||0===e.filteredProducts.length)}}function k(i,r){if(1&i&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Q(i,r){if(1&i&&(t.TgZ(0,"div",61)(1,"strong"),t._uU(2,"Error:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.errorMessage," ")}}function L(i,r){if(1&i&&(t.TgZ(0,"div",62)(1,"h4"),t._uU(2,"Product Information"),t.qZA(),t.TgZ(3,"p")(4,"strong"),t._uU(5,"Name:"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"p")(8,"strong"),t._uU(9,"Price:"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"p")(12,"strong"),t._uU(13,"Status:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"h5"),t._uU(16,"Description"),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA()()),2&i){const e=t.oxw();t.xp6(6),t.hij(" ",e.productDetails.name,""),t.xp6(4),t.hij(" \u20b1",e.productDetails.price,""),t.xp6(4),t.hij(" ",e.productDetails.productStatus,""),t.xp6(4),t.Oqu(e.productDetails.description)}}function Y(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",63)(1,"div",64)(2,"h2",65),t._uU(3,"Product Receipt"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Product Name:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Price:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"Status:"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p")(18,"strong"),t._uU(19,"Description:"),t.qZA()(),t.TgZ(20,"p"),t._uU(21),t.qZA(),t._UZ(22,"hr"),t.TgZ(23,"p",65),t._uU(24,"Thank you for your purchase!"),t.qZA()(),t.TgZ(25,"button",66),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.printReceipt())}),t._uU(26,"Print Receipt"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(8),t.hij(" ",null==e.productDetails?null:e.productDetails.name,""),t.xp6(4),t.hij(" \u20b1",null==e.productDetails?null:e.productDetails.price,""),t.xp6(4),t.hij(" ",null==e.productDetails?null:e.productDetails.productStatus,""),t.xp6(5),t.Oqu(null==e.productDetails?null:e.productDetails.description)}}let S=(()=>{class i{constructor(e,o,d){this.productService=e,this.accountService=o,this.alertService=d,this.products=[],this.deactivatingProductId=null,this.reactivatingProductId=null,this.deletingProductId=null,this.selectedProductId="",this.errorMessage="",this.isAdminManager=!1,this.isUser=!1,this.filteredProducts=[],this.searchQuery=""}ngOnInit(){const e=this.accountService.accountValue;this.isAdminManager="Admin"===e?.role||"Staff"===e?.role,this.isUser="User"===e?.role,this.productService.getProduct().pipe((0,l.P)()).subscribe(c=>{this.products=c,this.filteredProducts=c})}searchProducts(){this.filteredProducts=this.searchQuery.trim()?this.products.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.products}printReceipt(){const e=document.getElementById("receipt")?.innerHTML;if(e){const o=document.body.innerHTML;document.body.innerHTML=e,window.print(),document.body.innerHTML=o,window.location.reload()}else this.alertService.error("Unable to print receipt.")}toggleDeactivateReactivateProduct(e){const o=this.products.find(d=>d.id===e);o?"deactivated"===o.productStatus?this.reactivateProduct(e,o):this.deactivateProduct(e,o):this.alertService.error("Product not found")}deactivateProduct(e,o){this.deactivatingProductId=e,this.productService.deactivateProduct(e).pipe((0,l.P)()).subscribe({next:()=>{o.productStatus="deactivated",this.deactivatingProductId=null,this.alertService.success("Product deactivated successfully")},error:d=>{this.deactivatingProductId=null,console.error("Error deactivating product:",d),this.alertService.error(d)}})}reactivateProduct(e,o){this.reactivatingProductId=e,this.productService.reactivateProduct(e).pipe((0,l.P)()).subscribe({next:()=>{o.productStatus="active",this.reactivatingProductId=null,this.alertService.success("Product reactivated successfully")},error:()=>{this.reactivatingProductId=null,this.alertService.error("Error reactivating product")}})}openProductDetailsModal(){const e=document.getElementById("productDetailsModal");e&&new bootstrap.Modal(e).show()}getProductDetails(){this.errorMessage="",this.selectedProductId?this.productService.getProductById(this.selectedProductId).pipe((0,l.P)()).subscribe({next:e=>{this.productDetails=e,this.errorMessage=""},error:()=>{this.alertService.error("Error fetching product details")}}):this.alertService.error("Please select a product")}getAvailabilityInfo(e){this.productService.checkAvailability(e).pipe((0,l.P)()).subscribe({next:o=>{this.availabilityInfo={product:e,available:o.available,quantity:o.quantity}},error:()=>{this.alertService.error("Error fetching availability information")}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.M5),t.Y36(p.BR),t.Y36(p.c9))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:37,vars:10,consts:[[1,"p-4"],[1,"container"],[1,"title"],[1,"row"],["class","col",4,"ngIf"],[1,"col-auto"],["type","button",1,"btn","btn-sm","bg-dark","text-white","mb-2",3,"click"],["class","row",4,"ngIf"],[1,"mb-3"],["for","search",1,"form-label"],["type","text","id","search","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","input"],["class","table table-striped",4,"ngIf"],["id","productDetailsModal","tabindex","-1","aria-labelledby","productDetailsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","productDetailsModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["productDetailsForm","ngForm"],["for","productSelect",1,"form-label"],["name","productSelect","required","",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","alert alert-danger mt-4",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","receipt-container",4,"ngIf"],[1,"col"],["routerLink","add","data-bs-toggle","modal",1,"btn","btn-sm","bg-dark","text-white","mb-2"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-4"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["class","btn btn-info mb-3",3,"click",4,"ngIf"],["class","text-success",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"btn","btn-info","mb-3",3,"click"],[1,"text-success"],["routerLink","/order/management/add",1,"btn","btn-success"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"align-middle"],["style","white-space: nowrap",4,"ngIf"],["class","btn btn-info me-2",3,"click",4,"ngIf"],[1,"btn","btn-info","me-2",3,"click"],[2,"white-space","nowrap"],["class","btn btn-sm btn-primary me-1",3,"routerLink",4,"ngIf"],["class","btn btn-sm",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],[1,"btn","btn-sm",3,"ngClass","disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"],[3,"value"],[1,"alert","alert-danger","mt-4"],[1,"mt-4"],[1,"receipt-container"],["id","receipt"],[1,"text-center"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.TgZ(3,"div",1)(4,"h1",2),t._uU(5,"Waybill Receipt"),t.qZA(),t.TgZ(6,"div",3),t.YNc(7,g,3,0,"div",4),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return o.openProductDetailsModal()}),t._uU(10,"Get Product Details"),t.qZA()()()(),t.YNc(11,Z,2,1,"div",7),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Search "),t.qZA(),t.TgZ(15,"input",10),t.NdJ("ngModelChange",function(c){return o.searchQuery=c})("input",function(){return o.searchProducts()}),t.qZA()(),t.YNc(16,w,14,2,"table",11),t.qZA()(),t.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h5",16),t._uU(22,"Product Details"),t.qZA(),t._UZ(23,"button",17),t.qZA(),t.TgZ(24,"div",18)(25,"form",19,20),t.NdJ("ngSubmit",function(){return o.getProductDetails()}),t.TgZ(27,"div",8)(28,"label",21),t._uU(29,"Select Product"),t.qZA(),t.TgZ(30,"select",22),t.NdJ("ngModelChange",function(c){return o.selectedProductId=c}),t.YNc(31,k,2,2,"option",23),t.qZA()(),t.TgZ(32,"button",24),t._uU(33,"Get Details"),t.qZA()(),t.YNc(34,Q,4,1,"div",25),t.YNc(35,L,19,4,"div",26),t.YNc(36,Y,27,4,"div",27),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",o.isAdminManager),t.xp6(4),t.Q6J("ngIf",o.isUser),t.xp6(4),t.Q6J("ngModel",o.searchQuery),t.xp6(1),t.Q6J("ngIf",o.isAdminManager),t.xp6(14),t.Q6J("ngModel",o.selectedProductId),t.xp6(1),t.Q6J("ngForOf",o.products),t.xp6(1),t.Q6J("disabled",!o.selectedProductId),t.xp6(2),t.Q6J("ngIf",o.errorMessage),t.xp6(1),t.Q6J("ngIf",o.productDetails&&!o.errorMessage),t.xp6(1),t.Q6J("ngIf",o.productDetails))},dependencies:[_.mk,_.sg,_.O5,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.Q7,u.lC,u.rH,n.On,n.F],styles:[".title[_ngcontent-%COMP%]{\n    font-size: 18px;\n    font-weight: 500;\n  }\n\n  .btn[_ngcontent-%COMP%]   btn-sm[_ngcontent-%COMP%]   btn-success[_ngcontent-%COMP%]   mb-2[_ngcontent-%COMP%]{\n    width: 2px;\n  }\n\n  #search[_ngcontent-%COMP%]{\n    width: 40%;\n  }"]}),i})();function E(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Product Name is required"),t.qZA())}function M(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function D(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function O(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,E,2,0,"div",24),t.YNc(2,M,2,0,"div",24),t.YNc(3,D,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.waybillno.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.waybillno.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.waybillno.errors.maxlength)}}function F(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Product Name is required"),t.qZA())}function j(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function R(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function B(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,F,2,0,"div",24),t.YNc(2,j,2,0,"div",24),t.YNc(3,R,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.supplier.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.supplier.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.supplier.errors.maxlength)}}function K(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Product Name is required"),t.qZA())}function V(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function G(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function H(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,K,2,0,"div",24),t.YNc(2,V,2,0,"div",24),t.YNc(3,G,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.company.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.company.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.company.errors.maxlength)}}function $(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Product Name is required"),t.qZA())}function z(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function W(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function X(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,$,2,0,"div",24),t.YNc(2,z,2,0,"div",24),t.YNc(3,W,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.acceptedwarehouse.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.acceptedwarehouse.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.acceptedwarehouse.errors.maxlength)}}function tt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Received by is required"),t.qZA())}function et(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function it(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function nt(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,tt,2,0,"div",24),t.YNc(2,et,2,0,"div",24),t.YNc(3,it,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.receivedby.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.receivedby.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.receivedby.errors.maxlength)}}function rt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Product Name is required"),t.qZA())}function ot(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name must be at least 3 characters"),t.qZA())}function dt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Name cannot exceed 100 characters"),t.qZA())}function ct(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,rt,2,0,"div",24),t.YNc(2,ot,2,0,"div",24),t.YNc(3,dt,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.name.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.name.errors.maxlength)}}function at(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Description is required"),t.qZA())}function st(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Description must be at least 3 characters"),t.qZA())}function ut(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Description cannot exceed 100 characters"),t.qZA())}function lt(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,at,2,0,"div",24),t.YNc(2,st,2,0,"div",24),t.YNc(3,ut,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.description.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.description.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.f.description.errors.maxlength)}}function _t(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Quantity is required"),t.qZA())}function pt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Quantity must be a non-negative number"),t.qZA())}function mt(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,_t,2,0,"div",24),t.YNc(2,pt,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.min)}}function ft(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Price is required"),t.qZA())}function gt(i,r){1&i&&(t.TgZ(0,"div"),t._uU(1,"Price must be a non-negative number"),t.qZA())}function vt(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,ft,2,0,"div",24),t.YNc(2,gt,2,0,"div",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.price.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.price.errors.min)}}function bt(i,r){1&i&&t._UZ(0,"span",25)}const a=function(i){return{"is-invalid":i}};function ht(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",5),t.NdJ("ngSubmit",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.onSubmit())}),t.TgZ(1,"div",6)(2,"div",7)(3,"label",8),t._uU(4,"Waybill no"),t.qZA(),t._UZ(5,"input",9),t.YNc(6,O,4,3,"div",10),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"Supplier"),t.qZA(),t._UZ(11,"input",11),t.YNc(12,B,4,3,"div",10),t.qZA()(),t.TgZ(13,"div",7)(14,"label",8),t._uU(15,"Company"),t.qZA(),t._UZ(16,"input",12),t.YNc(17,H,4,3,"div",10),t.qZA(),t.TgZ(18,"div",7)(19,"label",8),t._uU(20,"Accepted Warehouse"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,X,4,3,"div",10),t.qZA(),t.TgZ(23,"div",7)(24,"label",8),t._uU(25,"Receive by"),t.qZA(),t._UZ(26,"input",14),t.YNc(27,nt,4,3,"div",10),t.qZA(),t.TgZ(28,"div",6)(29,"div",7)(30,"label",8),t._uU(31,"item name"),t.qZA(),t._UZ(32,"input",15),t.YNc(33,ct,4,3,"div",10),t.qZA(),t.TgZ(34,"div",7)(35,"label",8),t._uU(36,"Description"),t.qZA(),t._UZ(37,"input",16),t.YNc(38,lt,4,3,"div",10),t.qZA()(),t.TgZ(39,"div",6)(40,"div",7)(41,"label",8),t._uU(42,"Quantity"),t.qZA(),t._UZ(43,"input",17),t.YNc(44,mt,3,2,"div",10),t.TgZ(45,"div",7)(46,"label",8),t._uU(47,"Amount"),t.qZA(),t._UZ(48,"input",18),t.YNc(49,vt,3,2,"div",10),t.qZA()()(),t.TgZ(50,"div",19)(51,"button",20),t.YNc(52,bt,1,0,"span",21),t._uU(53," Save "),t.qZA(),t.TgZ(54,"a",22),t._uU(55,"Cancel"),t.qZA()()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("ngClass",t.VKq(21,a,e.submitted&&e.f.waybillno.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.waybillno.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(23,a,e.submitted&&e.f.supplier.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.supplier.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(25,a,e.submitted&&e.f.company.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.company.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(27,a,e.submitted&&e.f.acceptedwarehouse.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.acceptedwarehouse.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(29,a,e.submitted&&e.f.receivedby.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.receivedby.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(31,a,e.submitted&&e.f.name.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.name.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(33,a,e.submitted&&e.f.description.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.description.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(35,a,e.submitted&&e.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.quantity.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(37,a,e.submitted&&e.f.price.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.price.errors),t.xp6(2),t.Q6J("disabled",e.submitting),t.xp6(1),t.Q6J("ngIf",e.submitting)}}function xt(i,r){1&i&&(t.TgZ(0,"div",26),t._UZ(1,"span",27),t.qZA())}let f=(()=>{class i{constructor(e,o,d,c,Tt,Pt){this.formBuilder=e,this.route=o,this.router=d,this.productService=c,this.alertService=Tt,this.fb=Pt,this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({waybillno:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],supplier:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],company:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],acceptedwarehouse:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],receivedby:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],name:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],description:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],price:[1,[n.kI.required,n.kI.min(0)]],quantity:[1,[n.kI.required,n.kI.min(0)]],productStatus:["active",n.kI.required],rows:this.formBuilder.array([])}),this.title="New Purchase Receipt",this.id&&(this.title="Edit Product",this.loading=!0,this.productService.getProductById(this.id).pipe((0,l.P)()).subscribe({next:e=>{this.form.patchValue(e),this.loading=!1},error:()=>this.loading=!1}))}createRow(){return this.fb.group({waybillno:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],supplier:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],company:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],acceptedwarehouse:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],receivedby:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],name:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],description:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],quantity:[null,[n.kI.required,n.kI.min(0)]],price:[null,[n.kI.required,n.kI.min(0)]]})}get f(){return this.form.controls}items(){return this.form.get("rows")}get rows(){return this.form.get("rows")}addRow(){this.rows.push(this.createRow())}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveProduct().pipe((0,l.P)()).subscribe({next:()=>{this.alertService.success("Product saved successfully",{keepAfterRouteChange:!0}),this.router.navigateByUrl("/product")},error:e=>{this.alertService.error(e),this.submitting=!1}}))}saveProduct(){return this.id?this.productService.updateProduct(this.id,this.form.value):this.productService.createProduct(this.form.value)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(p.M5),t.Y36(p.c9),t.Y36(n.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:7,vars:3,consts:[[1,"p-4"],[1,"container"],[1,"title"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center m-5",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"mb-3","col-6"],[1,"form-label"],["type","text","formControlName","waybillno",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","supplier",1,"form-control",3,"ngClass"],["type","text","formControlName","company",1,"form-control",3,"ngClass"],["type","text","formControlName","acceptedwarehouse",1,"form-control",3,"ngClass"],["type","text","formControlName","receivedby",1,"form-control",3,"ngClass"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["type","text","formControlName","description",1,"form-control",3,"ngClass"],["type","number","formControlName","quantity",1,"form-control",3,"ngClass"],["type","number","formControlName","price",1,"form-control",3,"ngClass"],[1,"mb-3"],[1,"btn","btn-primary","me-2",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/product",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"text-center","m-5"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"router-outlet")(3,"h1",2),t._uU(4),t.qZA(),t.YNc(5,ht,56,39,"form",3),t.YNc(6,xt,2,0,"div",4),t.qZA()()()),2&e&&(t.xp6(4),t.Oqu(o.title),t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[_.mk,_.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,u.lC,u.rH],styles:["@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n\n[_ngcontent-%COMP%]:root {\n  --primary: #3b82f6; \n}\n\n    .title[_ngcontent-%COMP%]{\n        font-size: 18px;\n        font-weight: 500;\n    }"]}),i})();const Zt=[{path:"",component:S},{path:"add",component:f},{path:"edit/:id",component:f}];let At=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(Zt),u.Bz]}),i})(),qt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.ez,n.UX,At,n.u5]}),i})()}}]);