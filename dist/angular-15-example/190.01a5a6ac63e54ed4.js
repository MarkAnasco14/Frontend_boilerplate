"use strict";(self.webpackChunkangular_15_example=self.webpackChunkangular_15_example||[]).push([[190],{9190:(T,h,l)=>{l.r(h),l.d(h,{WarehouseModule:()=>W});var n=l(433),m=l(6895),p=l(7859),a=l(590),e=l(8256),d=l(4786);function v(i,r){if(1&i&&(e.TgZ(0,"li")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(null==t.product?null:t.product.name),e.xp6(1),e.AsE(" - Current Bulk: ",t.bulkQuantity," (Minimum Level: ",t.minimumBulkLevel,") ")}}function b(i,r){if(1&i&&(e.TgZ(0,"div",28)(1,"h4",29),e._uU(2,"Low Stock Alerts"),e.qZA(),e.TgZ(3,"ul",30),e.YNc(4,v,4,3,"li",10),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.lowStockItems)}}function f(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"button",31),e.NdJ("click",function(){const u=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectWarehouse(u))}),e._uU(14," Update Bulk Stock "),e.qZA(),e.TgZ(15,"button",32),e.NdJ("click",function(){const u=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectWarehouse(u))}),e._uU(16," Set Minimum Level "),e.qZA(),e.TgZ(17,"button",33),e.NdJ("click",function(){const u=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectWarehouse(u))}),e._uU(18," Transfer Stock "),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Oqu(null==t.product?null:t.product.name),e.xp6(2),e.Oqu(t.bulkQuantity),e.xp6(2),e.Oqu(t.minimumBulkLevel),e.xp6(2),e.Oqu(t.location),e.xp6(2),e.Tol("badge "+("active"===t.status?"bg-success":"bg-danger")),e.xp6(1),e.hij(" ",t.status," ")}}function _(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"p")(2,"strong"),e._uU(3,"Product:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",25)(6,"label"),e._uU(7,"Bulk Quantity"),e.qZA(),e.TgZ(8,"input",34),e.NdJ("ngModelChange",function(s){e.CHM(t);const u=e.oxw();return e.KtG(u.updatedQuantity=s)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.selectedWarehouse.product?null:t.selectedWarehouse.product.name,""),e.xp6(4),e.Q6J("ngModel",t.updatedQuantity)}}function k(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"p")(2,"strong"),e._uU(3,"Product:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",25)(6,"label"),e._uU(7,"Minimum Level"),e.qZA(),e.TgZ(8,"input",34),e.NdJ("ngModelChange",function(s){e.CHM(t);const u=e.oxw();return e.KtG(u.updatedMinimumLevel=s)}),e.qZA(),e.TgZ(9,"small",35),e._uU(10," Alert will be triggered when stock falls below this level "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.selectedWarehouse.product?null:t.selectedWarehouse.product.name,""),e.xp6(4),e.Q6J("ngModel",t.updatedMinimumLevel)}}let Z=(()=>{class i{constructor(t,o,s){this.warehouseService=t,this.productService=o,this.alertService=s,this.warehouseStock=[],this.lowStockItems=[],this.products=[],this.loading=!1,this.updatedQuantity="",this.updatedMinimumLevel="",this.showLowStockOnly=!1,this.transferQuantity=""}ngOnInit(){this.loadProducts()}loadProducts(){this.loading=!0,this.productService.getProduct().pipe((0,a.P)()).subscribe({next:t=>{this.products=t,this.loadWarehouseStock(),this.loadLowStockItems()},error:()=>{this.alertService.error("Failed to load products"),this.loading=!1}})}loadWarehouseStock(){this.warehouseService.getWarehouseStock().pipe((0,a.P)()).subscribe({next:t=>{this.warehouseStock=t.map(o=>({...o,product:this.products.find(s=>s.id===o.productId)})),this.loading=!1},error:()=>{this.alertService.error("Failed to load warehouse stock"),this.loading=!1}})}loadLowStockItems(){this.warehouseService.getLowBulkStock().pipe((0,a.P)()).subscribe({next:t=>{this.lowStockItems=t.map(o=>({...o,product:this.products.find(s=>s.id===o.productId)}))},error:()=>{this.alertService.error("Failed to load low stock items")}})}selectWarehouse(t){this.selectedWarehouse=t,this.updatedQuantity=t.bulkQuantity,this.updatedMinimumLevel=t.minimumBulkLevel}transferStock(){if(!this.selectedWarehouse)return;const t=Number(this.selectedWarehouse.productId),o=Number(this.transferQuantity);isNaN(t)||isNaN(o)?this.alertService.error("Invalid input: Ensure quantity is numeric"):this.warehouseService.transferToStore(t,o).pipe((0,a.P)()).subscribe({next:s=>{this.alertService.success("Stock transferred successfully"),this.loadWarehouseStock(),this.closeModal("transferModal")},error:s=>{this.alertService.error("Error transferring stock: "+s)}})}updateBulkStock(){if(!this.selectedWarehouse)return;const t=Number(this.selectedWarehouse.productId),o=Number(this.updatedQuantity);isNaN(t)||isNaN(o)?this.alertService.error("Invalid input: Ensure quantity is numeric"):this.warehouseService.updateBulkStock(t,o).pipe((0,a.P)()).subscribe({next:()=>{this.alertService.success("Bulk stock updated successfully"),this.loadWarehouseStock(),this.loadLowStockItems(),this.closeModal("updateStockModal")},error:s=>{this.alertService.error("Error updating bulk stock: "+s)}})}updateMinimumLevel(){if(!this.selectedWarehouse)return;const t=Number(this.selectedWarehouse.productId),o=Number(this.updatedMinimumLevel);isNaN(t)||isNaN(o)?this.alertService.error("Invalid input: Ensure minimum level is numeric"):this.warehouseService.setMinimumBulkLevel(t,o).pipe((0,a.P)()).subscribe({next:()=>{this.alertService.success("Minimum level updated successfully"),this.loadWarehouseStock(),this.closeModal("minimumLevelModal")},error:s=>{this.alertService.error("Error updating minimum level: "+s)}})}toggleLowStockFilter(){this.showLowStockOnly=!this.showLowStockOnly,this.showLowStockOnly?this.loadLowStockItems():this.loadWarehouseStock()}closeModal(t){const o=document.getElementById(t);o&&bootstrap.Modal.getInstance(o).hide(),this.selectedWarehouse=void 0,this.updatedQuantity="",this.updatedMinimumLevel="",this.transferQuantity=""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.lQ),e.Y36(d.M5),e.Y36(d.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:73,vars:6,consts:[[1,"p-4"],[1,"container"],[1,"warehouse"],[1,"mb-3"],[1,"btn","btn-outline-primary","me-2",3,"click"],["class","alert alert-warning mb-3",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["id","updateStockModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","minimumLevelModal","tabindex","-1",1,"modal","fade"],["tabindex","-1","id","transferModal",1,"modal"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"form-group"],["for","transferQuantity"],["type","number","id","transferQuantity",1,"form-control",3,"ngModel","ngModelChange"],[1,"alert","alert-warning","mb-3"],[1,"alert-heading"],[1,"list-unstyled","mb-0"],["data-bs-toggle","modal","data-bs-target","#updateStockModal",1,"btn","btn-sm","btn-primary","me-1",3,"click"],["data-bs-toggle","modal","data-bs-target","#minimumLevelModal",1,"btn","btn-sm","btn-secondary","me-1",3,"click"],["data-bs-toggle","modal","data-bs-target","#transferModal",1,"btn","btn-sm","btn-warning",3,"click"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Warehouse Management"),e.qZA(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return o.toggleLowStockFilter()}),e._uU(6),e.qZA()(),e.YNc(7,b,5,1,"div",5),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),e._uU(15,"Product Name"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Bulk Quantity"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Minimum Level"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Location"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Status"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Actions"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,f,19,7,"tr",10),e.qZA()()()()()()(),e.TgZ(28,"div",11)(29,"div",12)(30,"div",13)(31,"div",14)(32,"h5",15),e._uU(33,"Update Bulk Quantity"),e.qZA(),e._UZ(34,"button",16),e.qZA(),e.TgZ(35,"div",17),e.YNc(36,_,9,2,"div",18),e.qZA(),e.TgZ(37,"div",19)(38,"button",20),e._uU(39,"Cancel"),e.qZA(),e.TgZ(40,"button",21),e.NdJ("click",function(){return o.updateBulkStock()}),e._uU(41,"Save"),e.qZA()()()()(),e.TgZ(42,"div",22)(43,"div",12)(44,"div",13)(45,"div",14)(46,"h5",15),e._uU(47,"Set Minimum Level"),e.qZA(),e._UZ(48,"button",16),e.qZA(),e.TgZ(49,"div",17),e.YNc(50,k,11,2,"div",18),e.qZA(),e.TgZ(51,"div",19)(52,"button",20),e._uU(53,"Cancel"),e.qZA(),e.TgZ(54,"button",21),e.NdJ("click",function(){return o.updateMinimumLevel()}),e._uU(55,"Save"),e.qZA()()()()(),e.TgZ(56,"div",23)(57,"div",12)(58,"div",13)(59,"div",14)(60,"h5",15),e._uU(61,"Transfer to Quantity to inventory"),e.qZA(),e._UZ(62,"button",24),e.qZA(),e.TgZ(63,"div",17)(64,"div",25)(65,"label",26),e._uU(66,"Quantity to Transfer"),e.qZA(),e.TgZ(67,"input",27),e.NdJ("ngModelChange",function(u){return o.transferQuantity=u}),e.qZA()()(),e.TgZ(68,"div",19)(69,"button",20),e._uU(70,"Cancel"),e.qZA(),e.TgZ(71,"button",21),e.NdJ("click",function(){return o.transferStock()}),e._uU(72,"Transfer"),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",o.showLowStockOnly?"Show All Stock":"Show Low Stock Only"," "),e.xp6(1),e.Q6J("ngIf",o.showLowStockOnly&&o.lowStockItems.length>0),e.xp6(20),e.Q6J("ngForOf",o.warehouseStock),e.xp6(9),e.Q6J("ngIf",o.selectedWarehouse),e.xp6(14),e.Q6J("ngIf",o.selectedWarehouse),e.xp6(17),e.Q6J("ngModel",o.transferQuantity))},dependencies:[m.sg,m.O5,n.Fj,n.wV,n.JJ,n.On],styles:[".warehouse[_ngcontent-%COMP%]{\n        font-size: 18px;\n        font-weight: 500;\n    }"]}),i})(),g=(()=>{class i{constructor(t,o,s){this.warehouseService=t,this.alertService=o,this.formBuilder=s,this.warehouses=[],this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.loadWarehouses(),this.form=this.formBuilder.group({productId:["",n.kI.required],bulkQuantity:[1,[n.kI.required,n.kI.min(0)]],minimumBulkLevel:[1,[n.kI.required,n.kI.min(0)]],location:["",n.kI.required],status:["",n.kI.required]})}loadWarehouses(){this.loading=!0,this.warehouseService.getWarehouseStock().pipe((0,a.P)()).subscribe({next:t=>{this.warehouses=t,this.loading=!1},error:t=>{this.alertService.error("Error loading warehouses: "+t),this.loading=!1}})}selectWarehouse(t){this.selectedWarehouse=t,this.form.patchValue({productId:t.productId,bulkQuantity:t.bulkQuantity,minimumBulkLevel:t.minimumBulkLevel,location:t.location,status:t.status})}onUpdateStock(){if(this.submitted=!0,this.alertService.clear(),this.form.invalid||!this.selectedWarehouse)return;this.submitting=!0;const{productId:t,bulkQuantity:o}=this.form.value;this.warehouseService.updateBulkStock(Number(t),Number(o)).pipe((0,a.P)()).subscribe({next:()=>{this.alertService.success("Bulk stock updated successfully"),this.loadWarehouses(),this.submitting=!1},error:s=>{this.alertService.error("Error updating stock: "+s),this.submitting=!1}})}onSetMinimumLevel(){if(this.submitted=!0,this.alertService.clear(),this.form.invalid||!this.selectedWarehouse)return;const{productId:t,minimumBulkLevel:o}=this.form.value;this.warehouseService.setMinimumBulkLevel(Number(t),Number(o)).pipe((0,a.P)()).subscribe({next:()=>{this.alertService.success("Minimum bulk level updated successfully"),this.loadWarehouses()},error:s=>{this.alertService.error("Error updating minimum level: "+s)}})}clearSelection(){this.selectedWarehouse=void 0,this.form.reset({bulkQuantity:0,minimumBulkLevel:0,status:""})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.lQ),e.Y36(d.c9),e.Y36(n.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"warehouse-container"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Manage Warehouses"),e.qZA()())},encapsulation:2}),i})();const S=[{path:"",component:Z},{path:"add",component:g},{path:"edit/:id",component:g}];let y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(S),p.Bz]}),i})(),W=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,n.UX,y,n.u5]}),i})()}}]);